"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[308],{8308:(D,b,c)=>{c.r(b),c.d(b,{ProductsModule:()=>F});var d=c(6814),h=c(7304),e=c(5879);let Z=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=e.Xpm({type:n,selectors:[["app-products"]],decls:1,vars:0,template:function(i,o){1&i&&e._UZ(0,"router-outlet")},dependencies:[h.lC]})}return n})();var l=c(9862),C=c(5619),p=c(4716),u=c(6988),v=c(3595);let _=(()=>{class n{http;authservice;token;isLoading$;isLoadingSubject;constructor(t,i){this.http=t,this.authservice=i,this.isLoadingSubject=new C.X(!1),this.isLoading$=this.isLoadingSubject.asObservable(),this.token=this.authservice.token}listProducts(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:this.token});return console.log("headers"),console.log(i),this.http.get(u.$g+"products?search="+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}BuscarProduct(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:this.token});return console.log("headers"),console.log(i),this.http.get(u.$g+"products/search/"+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}configProducts(){this.isLoadingSubject.next(!0);let t=new l.WM({Authorization:this.token});return this.http.get(u.$g+"products",{headers:t}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}createProduct(t){console.log(t),this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:this.token});return this.http.post(u.$g+"products",t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}showProduct(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:this.token});return this.http.put(u.$g+"products/"+t,{},{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}updateProductwithImage(t,i){this.isLoadingSubject.next(!0);let o=new l.WM({Authorization:this.token});return this.http.put(u.$g+"products/upload/"+t,i,{headers:o}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}updateProduct(t,i){this.isLoadingSubject.next(!0);let o=new l.WM({Authorization:this.token});return this.http.put(u.$g+"products/"+t,i,{headers:o}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}deleteProduct(t){this.isLoadingSubject.next(!0);let i=new l.WM({Authorization:this.token});return this.http.delete(u.$g+"products/"+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}listCategories(t){this.isLoadingSubject.next(!0);let i=new l.WM({"Content-Type":"application/json",Authorization:this.token});return this.http.get(u.$g+"categories?search="+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}paginateProducts(t){this.isLoadingSubject.next(!0);let i=new l.WM({"Content-Type":"application/json",Authorization:this.token});return this.http.get(u.$g+"products/pagination?"+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}paginateProducts2(t){this.isLoadingSubject.next(!0);let i=new l.WM({"Content-Type":"application/json",Authorization:this.token});return this.http.get(u.$g+"products/pagination?page="+t,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}recargarPagina(){window.location.reload()}static \u0275fac=function(i){return new(i||n)(e.LFG(l.eN),e.LFG(v.e8))};static \u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f=c(2425),m=c(1274),r=c(6223);function T(n,g){1&n&&e._UZ(0,"span",15)}let P=(()=>{class n{productService;toastr;modal;product;ProductD=new e.vpe;isLoading;constructor(t,i,o){this.productService=t,this.toastr=i,this.modal=o}ngOnInit(){this.isLoading=this.productService.isLoading$}delete(){this.productService.deleteProduct(this.product.id).subscribe(t=>{403==t.message?this.toastr.error("Validaci\xf3n",t.message_text):(this.ProductD.emit({message:200}),this.modal.close())}),this.productService.recargarPagina()}static \u0275fac=function(i){return new(i||n)(e.Y36(_),e.Y36(f._W),e.Y36(m.Kz))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-delete-product"]],inputs:{product:"product"},outputs:{ProductD:"ProductD"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return o.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12," \xbfESTAS SEGURO DE ELIMINAR ESTA PRODUCTO? "),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return o.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return o.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,T,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&i&&(e.xp6(3),e.hij("Delete Categorie: #",o.product.id,""),e.xp6(16),e.Q6J("ngIf",e.lcZ(20,2,o.isLoading)))},dependencies:[d.O5,r._Y,r.JL,r.F,d.Ov]})}return n})();function x(n,g){1&n&&e._UZ(0,"span",45)}function y(n,g){if(1&n&&(e.TgZ(0,"div",59),e._UZ(1,"img",60),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH)}}function L(n,g){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",46)(2,"td")(3,"div",47),e.YNc(4,y,2,1,"div",48),e.TgZ(5,"div",49)(6,"a",50),e._uU(7),e.qZA()()()(),e.TgZ(8,"td"),e.ynx(9),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"td",51)(13,"a",52)(14,"i",53),e._UZ(15,"span",6)(16,"span",7),e.qZA()(),e.TgZ(17,"a",54),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteProduct(a))}),e.TgZ(18,"i",55),e._UZ(19,"span",6)(20,"span",7)(21,"span",56)(22,"span",57)(23,"span",58),e.qZA()()()(),e.BQk()}if(2&n){const t=g.$implicit;e.xp6(4),e.Q6J("ngIf",t.image),e.xp6(3),e.Oqu(t.name),e.xp6(4),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("routerLink","/products/list/edit/"+t.id)}}function w(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"ngb-pagination",61),e.NdJ("pageChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.currentPage=o)})("pageChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.loadPage(o))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("collectionSize",t.totalItems)("page",t.currentPage)("pageSize",t.itemsPerPage)("rotate",!0)("boundaryLinks",!0)}}let A=(()=>{class n{productService;modalService;authservice;products=[];search;saved=!0;isLoading$;$event;page=1;totalItems;itemCount;itemsPerPage;totalPages;currentPage;constructor(t,i,o){this.productService=t,this.modalService=i,this.authservice=o}ngOnInit(){this.isLoading$=this.productService.isLoading$,this.productService.paginateProducts2(this.page).subscribe(t=>{this.products=t.items,this.totalItems=t.meta.totalItems,this.itemCount=t.meta.itemCount,this.itemsPerPage=t.meta.itemsPerPage,this.totalPages=t.meta.totalPages,this.currentPage=t.meta.currentPage})}loadPage(t){console.log(t),this.productService.paginateProducts2(t).subscribe(i=>{this.products=i.items,this.totalItems=i.meta.totalItems,this.itemCount=i.meta.itemCount,this.itemsPerPage=i.meta.itemsPerPage,this.totalPages=i.meta.totalPages,this.currentPage=i.meta.currentPage})}reset(){this.search=null,this.loadPage(this.$event=1),this.saved=!0}BuscarProduct(t){this.search=t,this.productService.BuscarProduct(this.search).subscribe(i=>{console.log(i),this.products=i,this.saved=!1})}deleteProduct(t){const i=this.modalService.open(P,{centered:!0,size:"md"});i.componentInstance.product=t,i.componentInstance.product.subscribe(o=>{let a=this.products.findIndex(s=>s.id==o.id);-1!=a&&this.products.splice(a,1),this.productService.recargarPagina()})}static \u0275fac=function(i){return new(i||n)(e.Y36(_),e.Y36(m.FF),e.Y36(v.e8))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-list-product"]],decls:57,vars:6,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-3"],["type","button","id","button",1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5",3,"click"],[1,"path1"],[1,"path2"],["type","text","data-kt-user-table-filter","search","placeholder","Buscar producto",1,"form-control","form-control-solid","w-250px","ps-13",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-toolbar"],["data-kt-user-table-toolbar","base",1,"d-flex","justify-content-end"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","w-300px","w-md-325px"],[1,"separator","border-gray-200"],["data-kt-user-table-filter","form",1,"px-7","py-5"],[1,"mb-10"],[1,"form-label","fs-6","fw-semibold"],["data-kt-select2","true","data-placeholder","Select option","data-allow-clear","true","data-kt-user-table-filter","two-step","data-hide-search","true","data-select2-id","select2-data-12-cr6q","tabindex","-1","aria-hidden","true","data-kt-initialized","1",1,"form-select","form-select-solid","fw-bold","select2-hidden-accessible"],["data-select2-id","select2-data-14-2pp3"],["value","Enabled"],["dir","ltr","data-select2-id","select2-data-13-3y7a",1,"select2","select2-container","select2-container--bootstrap5",2,"width","100%"],[1,"selection"],["role","combobox","aria-haspopup","true","aria-expanded","false","tabindex","0","aria-disabled","false","aria-labelledby","select2-oer2-container","aria-controls","select2-oer2-container",1,"select2-selection","select2-selection--single","form-select","form-select-solid","fw-bold"],["id","select2-oer2-container","role","textbox","aria-readonly","true","title","Select option",1,"select2-selection__rendered"],[1,"select2-selection__placeholder"],["role","presentation",1,"select2-selection__arrow"],["role","presentation"],["aria-hidden","true",1,"dropdown-wrapper"],[1,"d-flex","justify-content-end"],["type","reset","data-kt-menu-dismiss","true","data-kt-user-table-filter","reset",1,"btn","btn-light","btn-active-light-primary","fw-semibold","me-2","px-6"],["type","submit","data-kt-menu-dismiss","true","data-kt-user-table-filter","filter",1,"btn","btn-primary","fw-semibold","px-6"],["routerLink","/products/register",1,"btn","btn-primary"],[1,"ki-duotone","ki-plus","fs-2"],[1,"card-body","py-4"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive"],["id","kt_table_users",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","275.844px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-100px","sorting_disabled",2,"width","129.75px"],[1,"text-gray-600","fw-semibold"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"odd"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px me-5",4,"ngIf"],[1,"d-flex","justify-content-start","flex-column"],["href","#",1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"routerLink"],[1,"ki-duotone","ki-pencil","fs-2"],["click","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.YNc(1,x,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){return o.BuscarProduct(o.search)}),e._UZ(7,"span",6)(8,"span",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("keyup.enter",function(){return o.BuscarProduct(o.search)})("ngModelChange",function(s){return o.search=s}),e.qZA()(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return o.reset()}),e._uU(12,"Reset"),e.qZA()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13),e._UZ(16,"div",14),e.TgZ(17,"div",15)(18,"div",16)(19,"label",17),e._uU(20,"Two Step Verification:"),e.qZA(),e.TgZ(21,"select",18),e._UZ(22,"option",19),e.TgZ(23,"option",20),e._uU(24,"Enabled"),e.qZA()(),e.TgZ(25,"span",21)(26,"span",22)(27,"span",23)(28,"span",24)(29,"span",25),e._uU(30,"Select option"),e.qZA()(),e.TgZ(31,"span",26),e._UZ(32,"b",27),e.qZA()()(),e._UZ(33,"span",28),e.qZA()(),e.TgZ(34,"div",29)(35,"button",30),e._uU(36,"Reset"),e.qZA(),e.TgZ(37,"button",31),e._uU(38,"Apply"),e.qZA()()()(),e.TgZ(39,"a",32),e._UZ(40,"i",33),e._uU(41," A\xf1adir Categoria "),e.qZA()()()(),e.TgZ(42,"div",34)(43,"div",35)(44,"div",36)(45,"table",37)(46,"thead")(47,"tr",38)(48,"th",39),e._uU(49," Nombre "),e.qZA(),e.TgZ(50,"th",40),e._uU(51," Descripc\xedon "),e.qZA(),e.TgZ(52,"th",41),e._uU(53," Acciones "),e.qZA()()(),e.TgZ(54,"tbody",42),e.YNc(55,L,24,4,"ng-container",43),e.qZA()(),e.YNc(56,w,1,5,"ngb-pagination",44),e.qZA()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,o.isLoading$)),e.xp6(8),e.Q6J("ngModel",o.search),e.xp6(46),e.Q6J("ngForOf",o.products),e.xp6(1),e.Q6J("ngIf",o.saved))},dependencies:[d.sg,d.O5,h.rH,r.YN,r.Kr,r.Fj,r.JJ,r.On,m.N9,d.Ov],styles:["#button[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent;border-radius:0}"]})}return n})();function k(n,g){1&n&&e._UZ(0,"span",23)}function U(n,g){if(1&n&&(e.ynx(0),e.TgZ(1,"option",24),e._uU(2),e.qZA(),e.BQk()),2&n){const t=g.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function M(n,g){1&n&&e._UZ(0,"span",23)}function J(n,g){if(1&n&&(e.ynx(0),e.TgZ(1,"option",24),e._uU(2),e.qZA(),e.BQk()),2&n){const t=g.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const q=[{path:"",component:Z,children:[{path:"register",component:(()=>{class n{productservice;toastr;type_categorie=1;name;description;imagen_previsualiza_1="https://preview.keenthemes.com/metronic8/demo1/assets/media/svg/illustrations/easy/2.svg";imagen_previsualiza_2="https://preview.keenthemes.com/metronic8/demo1/assets/media/svg/illustrations/easy/2.svg";file_image1=null;file_image2=null;price=null;isLoading$;search=null;categorias_id="";categorias=[];constructor(t,i){this.productservice=t,this.toastr=i}ngOnInit(){this.isLoading$=this.productservice.isLoading$,this.Categoria_list_name()}processFile1(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toastr.error("Validacion","El archivo no es una imagen");this.file_image1=t.target.files[0];let i=new FileReader;i.readAsDataURL(this.file_image1),i.onloadend=()=>this.imagen_previsualiza_1=i.result,this.isLoadingView(),console.log(this.imagen_previsualiza_1),console.log(this.file_image1)}processFile2(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toastr.error("Validacion","El archivo no es una imagen");this.file_image2=t.target.files[0];let i=new FileReader;i.readAsDataURL(this.file_image2),i.onloadend=()=>this.imagen_previsualiza_2=i.result,this.isLoadingView(),console.log(this.imagen_previsualiza_2),console.log(this.file_image2)}isLoadingView(){this.productservice.isLoadingSubject.next(!0),setTimeout(()=>{this.productservice.isLoadingSubject.next(!1)},50)}Categoria_list_name(){this.productservice.listCategories(this.search).subscribe(t=>{console.log(t),this.categorias=t})}save(){if(console.log(this.name),console.log(this.description),console.log(this.imagen_previsualiza_1),console.log(this.imagen_previsualiza_2),console.log(this.file_image1),console.log(this.file_image2),console.log(this.price),console.log(this.categorias_id),!this.name||!this.description)return void this.toastr.error("Validacion","Los campos con el * son obligatorio");if(!this.price)return void this.toastr.error("Validacion","El precio es obligatorio");if(!this.file_image1||!this.file_image2)return void this.toastr.error("Validacion","La imagen es obligatoria");if(!this.categorias_id)return void this.toastr.error("Validacion","La categoria es obligatoria");let t=new FormData;t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("id_category",this.categorias_id),t.append("files[]",this.file_image1),t.append("files[]",this.file_image2),this.productservice.createProduct(t).subscribe(i=>{console.log("respuesta"),console.log(i),403!=i.message?this.toastr.success("Exito","La categoria se registro perfectamente"):this.toastr.error("Validacion","La categoria ya existe")})}static \u0275fac=function(i){return new(i||n)(e.Y36(_),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-create-product"]],decls:46,vars:12,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-6","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","name","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"fs-6","fw-semibold","mb-2"],["rows","3","name","description",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-4","fv-row","fv-plugins-icon-container"],["type","number","name","price","placeholder","Por ejemplo:   20 PEN  ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["name","categorias",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","","disabled","","hidden",""],[4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-6","col-sm-12","my-2"],[1,"form-label"],[1,"custom-file"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[1,""],["width","200","alt","",1,"img","py-4",3,"src"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.YNc(1,k,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(s){return o.name=s}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Descripcion: "),e.qZA(),e.TgZ(12,"textarea",8),e.NdJ("ngModelChange",function(s){return o.description=s}),e.qZA()()(),e.TgZ(13,"div",3)(14,"div",9)(15,"label",5),e._uU(16,"Precio Pen: (S/.)"),e.qZA(),e.TgZ(17,"input",10),e.NdJ("ngModelChange",function(s){return o.price=s}),e.qZA()(),e.TgZ(18,"div",9)(19,"label",5),e._uU(20,"Categoria: *"),e.qZA(),e.TgZ(21,"select",11),e.NdJ("ngModelChange",function(s){return o.categorias_id=s}),e.TgZ(22,"option",12),e._uU(23,"Selec."),e.qZA(),e.YNc(24,U,3,2,"ng-container",13),e.qZA()()(),e.TgZ(25,"div",3)(26,"div",14)(27,"label",15),e._uU(28),e.qZA(),e.TgZ(29,"div",16)(30,"input",17),e.NdJ("change",function(s){return o.processFile1(s)}),e.qZA(),e._UZ(31,"label",18),e.qZA(),e.TgZ(32,"div",19),e._UZ(33,"img",20),e.qZA()(),e.TgZ(34,"div",14)(35,"label",15),e._uU(36),e.qZA(),e.TgZ(37,"div",16)(38,"input",17),e.NdJ("change",function(s){return o.processFile2(s)}),e.qZA(),e._UZ(39,"label",18),e.qZA(),e.TgZ(40,"div",19),e._UZ(41,"img",20),e.qZA()()(),e.TgZ(42,"div",3)(43,"div",21)(44,"button",22),e.NdJ("click",function(){return o.save()}),e._uU(45,"Guardar"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,10,o.isLoading$)),e.xp6(7),e.Q6J("ngModel",o.name),e.xp6(4),e.Q6J("ngModel",o.description),e.xp6(5),e.Q6J("ngModel",o.price),e.xp6(4),e.Q6J("ngModel",o.categorias_id),e.xp6(3),e.Q6J("ngForOf",o.categorias),e.xp6(4),e.hij("Sube tu imagen: ( ",1==o.type_categorie?"*":"Opcional",")"),e.xp6(5),e.Q6J("src",o.imagen_previsualiza_1,e.LSH),e.xp6(3),e.hij("Sube tu imagen: ( ",1==o.type_categorie?"*":"Opcional",")"),e.xp6(5),e.Q6J("src",o.imagen_previsualiza_2,e.LSH))},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.On,d.Ov]})}return n})()},{path:"list",component:A},{path:"list/edit/:id",component:(()=>{class n{productservice;activedRoute;toastr;type_categorie=1;name;description;imagen_previsualiza_1="https://preview.keenthemes.com/metronic8/demo1/assets/media/svg/illustrations/easy/2.svg";imagen_previsualiza_2="https://preview.keenthemes.com/metronic8/demo1/assets/media/svg/illustrations/easy/2.svg";file_image1=null;file_image2=null;stock=null;price;isLoading$;search=null;categorias_id;categorias=[];PRODUCT;PRODUCT_ID;products=[];images_to_update;constructor(t,i,o){this.productservice=t,this.activedRoute=i,this.toastr=o}ngOnInit(){this.isLoading$=this.productservice.isLoading$,this.activedRoute.params.subscribe(t=>{console.log(t),this.PRODUCT_ID=t.id}),this.Categoria_list_name(),this.isLoading$=this.productservice.isLoading$,this.productservice.showProduct(this.PRODUCT_ID).subscribe(t=>{console.log(t),this.name=t.name,this.categorias_id=t.id_category,this.description=t.description,this.imagen_previsualiza_1=t.image1,this.imagen_previsualiza_2=t.image2,this.price=t.price,this.stock=t.stock})}processFile1(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toastr.error("Validacion","El archivo no es una imagen");this.file_image1=t.target.files[0];let i=new FileReader;i.readAsDataURL(this.file_image1),i.onloadend=()=>this.imagen_previsualiza_1=i.result,this.isLoadingView()}processFile2(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toastr.error("Validacion","El archivo no es una imagen");this.file_image2=t.target.files[0];let i=new FileReader;i.readAsDataURL(this.file_image2),i.onloadend=()=>this.imagen_previsualiza_2=i.result,this.isLoadingView()}isLoadingView(){this.productservice.isLoadingSubject.next(!0),setTimeout(()=>{this.productservice.isLoadingSubject.next(!1)},50)}Categoria_list_name(){this.productservice.listCategories(this.search).subscribe(t=>{this.categorias=t})}save(){if(this.name&&this.description)if(this.price)if(this.categorias_id){if(this.file_image1&&!this.file_image2){this.images_to_update="0";let t=new FormData;t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("stock",this.stock),t.append("id_category",this.categorias_id),t.append("images_to_update",this.images_to_update),t.append("files[]",this.file_image1),t.forEach((i,o)=>{console.log(o,i)}),this.productservice.updateProductwithImage(this.PRODUCT_ID,t).subscribe(i=>(console.log("Datos actualizados"),console.log(i),403==i.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el producto")))}if(!this.file_image1&&this.file_image2){this.images_to_update="1";let t=new FormData;t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("stock",this.stock),t.append("id_category",this.categorias_id),t.append("images_to_update",this.images_to_update),t.append("files[]",this.file_image2),this.productservice.updateProductwithImage(this.PRODUCT_ID,t).subscribe(i=>(console.log("Datos actualizados"),console.log(i),403==i.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el producto")))}if(this.file_image1&&this.file_image2){let t=new FormData;t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("stock",this.stock),t.append("id_category",this.categorias_id),this.images_to_update="0",t.append("images_to_update",this.images_to_update),this.images_to_update="1",t.append("images_to_update",this.images_to_update),t.append("files[]",this.file_image1),t.append("files[]",this.file_image2),this.productservice.updateProductwithImage(this.PRODUCT_ID,t).subscribe(i=>(console.log("Datos actualizados"),console.log(i),403==i.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el producto")))}this.file_image1||this.file_image2||this.productservice.updateProduct(this.PRODUCT_ID,{name:this.name,description:this.description,price:this.price,stock:this.stock,id_category:this.categorias_id}).subscribe(i=>(console.log("Datos actualizados"),console.log(i),403==i.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el producto")))}else this.toastr.error("Validacion","La categoria es obligatoria");else this.toastr.error("Validacion","El precio es obligatorio");else this.toastr.error("Validacion","Los campos con el * son obligatorio")}static \u0275fac=function(i){return new(i||n)(e.Y36(_),e.Y36(h.gz),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-edit-product"]],decls:46,vars:12,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-6","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","name","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"fs-6","fw-semibold","mb-2"],["rows","3","name","description",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-4","fv-row","fv-plugins-icon-container"],["type","number","name","price","placeholder","Por ejemplo:   20 PEN  ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","number","name","stock","placeholder","Colocar cantidad",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["name","categorias",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","","disabled","","hidden",""],[4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-6","col-sm-12","my-2"],[1,"custom-file"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[1,""],["width","200","alt","",1,"img","py-4",3,"src"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.YNc(1,M,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(s){return o.name=s}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Descripcion: "),e.qZA(),e.TgZ(12,"textarea",8),e.NdJ("ngModelChange",function(s){return o.description=s}),e.qZA()()(),e.TgZ(13,"div",3)(14,"div",9)(15,"label",5),e._uU(16,"Precio Pen: (S/.)"),e.qZA(),e.TgZ(17,"input",10),e.NdJ("ngModelChange",function(s){return o.price=s}),e.qZA()(),e.TgZ(18,"div",9)(19,"label",5),e._uU(20,"Stock:"),e.qZA(),e.TgZ(21,"input",11),e.NdJ("ngModelChange",function(s){return o.stock=s}),e.qZA()(),e.TgZ(22,"div",9)(23,"label",5),e._uU(24,"Categoria: *"),e.qZA(),e.TgZ(25,"select",12),e.NdJ("ngModelChange",function(s){return o.categorias_id=s}),e.TgZ(26,"option",13),e._uU(27),e.qZA(),e.YNc(28,J,3,2,"ng-container",14),e.qZA()()(),e.TgZ(29,"div",3)(30,"div",15)(31,"div",16)(32,"input",17),e.NdJ("change",function(s){return o.processFile1(s)}),e.qZA(),e._UZ(33,"label",18),e.qZA(),e.TgZ(34,"div",19),e._UZ(35,"img",20),e.qZA()(),e.TgZ(36,"div",15)(37,"div",16)(38,"input",17),e.NdJ("change",function(s){return o.processFile2(s)}),e.qZA(),e._UZ(39,"label",18),e.qZA(),e.TgZ(40,"div",19),e._UZ(41,"img",20),e.qZA()()(),e.TgZ(42,"div",3)(43,"div",21)(44,"button",22),e.NdJ("click",function(){return o.save()}),e._uU(45,"Guardar"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,10,o.isLoading$)),e.xp6(7),e.Q6J("ngModel",o.name),e.xp6(4),e.Q6J("ngModel",o.description),e.xp6(5),e.Q6J("ngModel",o.price),e.xp6(4),e.Q6J("ngModel",o.stock),e.xp6(4),e.Q6J("ngModel",o.categorias_id),e.xp6(2),e.Oqu(o.categorias),e.xp6(1),e.Q6J("ngForOf",o.categorias),e.xp6(7),e.Q6J("src",o.imagen_previsualiza_1,e.LSH),e.xp6(6),e.Q6J("src",o.imagen_previsualiza_2,e.LSH))},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.On,d.Ov]})}return n})()}]}];let j=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[h.Bz.forChild(q),h.Bz]})}return n})();var z=c(53);let F=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[d.ez,j,l.JF,r.u5,m.IJ,r.UX,z.vi,m.bz,m.jF]})}return n})()}}]);