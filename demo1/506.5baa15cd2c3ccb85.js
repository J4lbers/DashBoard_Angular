"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[506],{506:(q,b,r)=>{r.r(b),r.d(b,{UsuariosModule:()=>j});var d=r(6814),u=r(7304),e=r(5879);let Z=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.Xpm({type:n,selectors:[["app-usuarios"]],decls:1,vars:0,template:function(o,s){1&o&&e._UZ(0,"router-outlet")},dependencies:[u.lC]})}return n})();var c=r(9862),U=r(5619),m=r(4716),g=r(6988),_=r(3595);let h=(()=>{class n{http;authservice;token;isLoading$;isLoadingSubject;constructor(t,o){this.http=t,this.authservice=o,this.isLoadingSubject=new U.X(!1),this.isLoading$=this.isLoadingSubject.asObservable(),this.token=this.authservice.token}listUsers(){this.isLoadingSubject.next(!0);let t=new c.WM({Authorization:this.token});return console.log("headers"),console.log(t),this.http.get(g.$g+"users",{headers:t}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}showUser(t){this.isLoadingSubject.next(!0);let o=new c.WM({Authorization:this.token});return this.http.put(g.$g+"users/"+t,{},{headers:o}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}createUser(t){this.isLoadingSubject.next(!0);let o=new c.WM({Authorization:this.token});return console.log("headers"),console.log(o),this.http.post(g.$g+"auth/register",t,{headers:o}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}updateUser(t,o){this.isLoadingSubject.next(!0);let s=new c.WM({Authorization:this.token});return this.http.put(g.$g+"users/"+o,t,{headers:s}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}updateUserwithImage(t,o){this.isLoadingSubject.next(!0);let s=new c.WM({Authorization:this.token});return this.http.put(g.$g+"users/upload/"+o,t,{headers:s}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(o){return new(o||n)(e.LFG(c.eN),e.LFG(_.e8))};static \u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var l=r(6223);function T(n,p){1&n&&e._UZ(0,"span",37)}function C(n,p){if(1&n&&(e.TgZ(0,"div",48),e._UZ(1,"img",49),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH)}}function y(n,p){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=p.$implicit;e.xp6(2),e.Oqu(t.name)}}function x(n,p){if(1&n&&(e.ynx(0),e.TgZ(1,"tr",38)(2,"td")(3,"div",39),e.YNc(4,C,2,1,"div",40),e.TgZ(5,"div",41)(6,"a",42),e._uU(7),e.qZA()()()(),e.TgZ(8,"td"),e.ynx(9),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"td"),e.YNc(13,y,3,1,"ng-container",36),e.qZA(),e.TgZ(14,"td",43)(15,"a",44)(16,"i",45),e._UZ(17,"span",46)(18,"span",47),e.qZA()()()(),e.BQk()),2&n){const t=p.$implicit;e.xp6(4),e.Q6J("ngIf",t.image),e.xp6(3),e.Oqu(t.name),e.xp6(4),e.hij(" ",t.email," "),e.xp6(2),e.Q6J("ngForOf",t.roles),e.xp6(2),e.Q6J("routerLink","/usuarios/list/edit/"+t.id)}}let w=(()=>{class n{userService;search;saved;product;isLoading$;usuarios;constructor(t){this.userService=t}ngOnInit(){this.isLoading$=this.userService.isLoading$,this.listUsers()}listUsers(){this.userService.listUsers().subscribe(t=>{this.usuarios=t,console.log(this.usuarios)})}deleteProduct(t){}reset(){}static \u0275fac=function(o){return new(o||n)(e.Y36(h))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-list-users"]],decls:50,vars:4,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"card-toolbar"],["data-kt-user-table-toolbar","base",1,"d-flex","justify-content-end"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","w-300px","w-md-325px"],[1,"separator","border-gray-200"],["data-kt-user-table-filter","form",1,"px-7","py-5"],[1,"mb-10"],[1,"form-label","fs-6","fw-semibold"],["data-kt-select2","true","data-placeholder","Select option","data-allow-clear","true","data-kt-user-table-filter","two-step","data-hide-search","true","data-select2-id","select2-data-12-cr6q","tabindex","-1","aria-hidden","true","data-kt-initialized","1",1,"form-select","form-select-solid","fw-bold","select2-hidden-accessible"],["data-select2-id","select2-data-14-2pp3"],["value","Enabled"],["dir","ltr","data-select2-id","select2-data-13-3y7a",1,"select2","select2-container","select2-container--bootstrap5",2,"width","100%"],[1,"selection"],["role","combobox","aria-haspopup","true","aria-expanded","false","tabindex","0","aria-disabled","false","aria-labelledby","select2-oer2-container","aria-controls","select2-oer2-container",1,"select2-selection","select2-selection--single","form-select","form-select-solid","fw-bold"],["id","select2-oer2-container","role","textbox","aria-readonly","true","title","Select option",1,"select2-selection__rendered"],[1,"select2-selection__placeholder"],["role","presentation",1,"select2-selection__arrow"],["role","presentation"],["aria-hidden","true",1,"dropdown-wrapper"],[1,"d-flex","justify-content-end"],["type","reset","data-kt-menu-dismiss","true","data-kt-user-table-filter","reset",1,"btn","btn-light","btn-active-light-primary","fw-semibold","me-2","px-6"],["type","submit","data-kt-menu-dismiss","true","data-kt-user-table-filter","filter",1,"btn","btn-primary","fw-semibold","px-6"],["routerLink","/usuarios/register",1,"btn","btn-primary"],[1,"ki-duotone","ki-plus","fs-2"],[1,"card-body","py-4"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive"],["id","kt_table_users",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","275.844px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-100px","sorting_disabled",2,"width","129.75px"],[1,"text-gray-600","fw-semibold"],[4,"ngFor","ngForOf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"odd"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px me-5",4,"ngIf"],[1,"d-flex","justify-content-start","flex-column"],["href","#",1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"routerLink"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.YNc(1,T,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2),e._UZ(4,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"div",7),e.TgZ(9,"div",8)(10,"div",9)(11,"label",10),e._uU(12,"Two Step Verification:"),e.qZA(),e.TgZ(13,"select",11),e._UZ(14,"option",12),e.TgZ(15,"option",13),e._uU(16,"Enabled"),e.qZA()(),e.TgZ(17,"span",14)(18,"span",15)(19,"span",16)(20,"span",17)(21,"span",18),e._uU(22,"Select option"),e.qZA()(),e.TgZ(23,"span",19),e._UZ(24,"b",20),e.qZA()()(),e._UZ(25,"span",21),e.qZA()(),e.TgZ(26,"div",22)(27,"button",23),e._uU(28,"Reset"),e.qZA(),e.TgZ(29,"button",24),e._uU(30,"Apply"),e.qZA()()()(),e.TgZ(31,"a",25),e._UZ(32,"i",26),e._uU(33," A\xf1adir Usuario "),e.qZA()()()(),e.TgZ(34,"div",27)(35,"div",28)(36,"div",29)(37,"table",30)(38,"thead")(39,"tr",31)(40,"th",32),e._uU(41," Nombre "),e.qZA(),e.TgZ(42,"th",33),e._uU(43," Correo "),e.qZA(),e.TgZ(44,"th",33),e._uU(45," Roles "),e.qZA(),e.TgZ(46,"th",34),e._uU(47," Acciones "),e.qZA()()(),e.TgZ(48,"tbody",35),e.YNc(49,x,19,5,"ng-container",36),e.qZA()()()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.isLoading$)),e.xp6(48),e.Q6J("ngForOf",s.usuarios))},dependencies:[d.sg,d.O5,u.rH,l.YN,l.Kr,d.Ov]})}return n})();var v=r(2425);function A(n,p){1&n&&e._UZ(0,"span",13)}function M(n,p){1&n&&e._UZ(0,"span",19)}const S=[{path:"",component:Z,children:[{path:"list",component:w},{path:"register",component:(()=>{class n{userService;toastr;name;lastname;email;phone;password;rol;imagen_previsualiza;type_categorie=1;isLoading$;constructor(t,o){this.userService=t,this.toastr=o}ngOnInit(){this.isLoading$=this.userService.isLoading$,this.createUsers()}createUsers(){}processFile(t){}save(){const t={name:this.name,lastname:this.lastname,email:this.email,phone:this.phone,password:this.password,rolesIds:["CLIENT","ADMIN"]};console.log("datos"),console.log(t),this.userService.createUser(t).subscribe(o=>{console.log("respuesta"),console.log(o),403!=o.message?this.toastr.success("Exito","Se registro el usuario correctamente"):this.toastr.error("Validacion","La categoria ya existe")})}static \u0275fac=function(o){return new(o||n)(e.Y36(h),e.Y36(v._W))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-create-user"]],decls:31,vars:8,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-6","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","name","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","lastnmae","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","email","name","email","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","tel","name","phone","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","password","name","password",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.YNc(1,A,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(i){return s.name=i}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"Apellido: (*)"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(i){return s.lastname=i}),e.qZA()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"label",5),e._uU(16,"Correo: (*)"),e.qZA(),e.TgZ(17,"input",8),e.NdJ("ngModelChange",function(i){return s.email=i}),e.qZA()(),e.TgZ(18,"div",4)(19,"label",5),e._uU(20,"Num. Celular: (*)"),e.qZA(),e.TgZ(21,"input",9),e.NdJ("ngModelChange",function(i){return s.phone=i}),e.qZA()()(),e.TgZ(22,"div",3)(23,"div",4)(24,"label",5),e._uU(25,"Constrase\xf1a: (*)"),e.qZA(),e.TgZ(26,"input",10),e.NdJ("ngModelChange",function(i){return s.password=i}),e.qZA()()(),e.TgZ(27,"div",3)(28,"div",11)(29,"button",12),e.NdJ("click",function(){return s.save()}),e._uU(30,"Guardar"),e.qZA()()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,s.isLoading$)),e.xp6(7),e.Q6J("ngModel",s.name),e.xp6(4),e.Q6J("ngModel",s.lastname),e.xp6(5),e.Q6J("ngModel",s.email),e.xp6(4),e.Q6J("ngModel",s.phone),e.xp6(5),e.Q6J("ngModel",s.password))},dependencies:[d.O5,l.Fj,l.JJ,l.On,d.Ov]})}return n})()},{path:"list/edit/:id",component:(()=>{class n{userService;activedRoute;toastr;imagen_previsualiza="https://preview.keenthemes.com/metronic8/demo1/assets/media/svg/illustrations/easy/2.svg";name;lastname;email;phone;password;isLoading$=!1;USER_ID;file_image;constructor(t,o,s){this.userService=t,this.activedRoute=o,this.toastr=s}ngOnInit(){this.isLoading$=this.userService.isLoading$,this.activedRoute.params.subscribe(t=>{console.log(t),this.USER_ID=t.id}),this.userService.showUser(this.USER_ID).subscribe(t=>{console.log(t),this.name=t.name,this.lastname=t.lastname,this.email=t.email,this.phone=t.phone,this.imagen_previsualiza=t.image})}processFile(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toastr.error("Validacion","El archivo no es una imagen");this.file_image=t.target.files[0];let o=new FileReader;o.readAsDataURL(this.file_image),o.onloadend=()=>this.imagen_previsualiza=o.result,this.isLoadingView()}isLoadingView(){this.userService.isLoadingSubject.next(!0),setTimeout(()=>{this.userService.isLoadingSubject.next(!1)},50)}save(){if(this.file_image||this.userService.updateUser({name:this.name,lastname:this.lastname,email:this.email,phone:this.phone,password:this.password},this.USER_ID).subscribe(o=>(console.log("Datos actualizados"),console.log(o),403==o.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el producto"))),this.file_image){let t=new FormData;t.append("name",this.name),t.append("lastname",this.lastname),t.append("email",this.email),t.append("phone",this.phone),t.append("password",this.password),t.append("file",this.file_image),this.userService.updateUserwithImage(t,this.USER_ID).subscribe(o=>(console.log(o),403==o.message?void this.toastr.error("Validacion","el producto ya esxite"):void this.toastr.success("Exito","Se ha actulizado el los datos del usuaario")))}}static \u0275fac=function(o){return new(o||n)(e.Y36(h),e.Y36(u.gz),e.Y36(v._W))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-edit-user"]],decls:36,vars:8,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-6","fv-row","fv-plugins-icon-container"],[1,"fw-semibold","fs-6","py-2"],["type","text","name","name","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","lastnmae","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","email","name","email","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["type","tel","name","phone","p","","laceholder","Por ejemplo:   The best note book collection 2023 ",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-lg-6","col-md-6","col-sm-12","my-2"],[1,"form-label"],[1,"custom-file"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[1,""],["width","200","alt","",1,"img","py-4",3,"src"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.YNc(1,M,1,0,"span",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre: (*)"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(i){return s.name=i}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"Apellido: (*)"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(i){return s.lastname=i}),e.qZA()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"label",5),e._uU(16,"Correo: (*)"),e.qZA(),e.TgZ(17,"input",8),e.NdJ("ngModelChange",function(i){return s.email=i}),e.qZA()(),e.TgZ(18,"div",4)(19,"label",5),e._uU(20,"Num. Celular: (*)"),e.qZA(),e.TgZ(21,"input",9),e.NdJ("ngModelChange",function(i){return s.phone=i}),e.qZA()()(),e.TgZ(22,"div",3),e._uU(23," Subir Imagen "),e.TgZ(24,"div",10)(25,"label",11),e._uU(26,"Sube tu imagen:"),e.qZA(),e.TgZ(27,"div",12)(28,"input",13),e.NdJ("change",function(i){return s.processFile(i)}),e.qZA(),e._UZ(29,"label",14),e.qZA(),e.TgZ(30,"div",15),e._UZ(31,"img",16),e.qZA()()(),e.TgZ(32,"div",3)(33,"div",17)(34,"button",18),e.NdJ("click",function(){return s.save()}),e._uU(35,"Actulizar"),e.qZA()()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,s.isLoading$)),e.xp6(7),e.Q6J("ngModel",s.name),e.xp6(4),e.Q6J("ngModel",s.lastname),e.xp6(5),e.Q6J("ngModel",s.email),e.xp6(4),e.Q6J("ngModel",s.phone),e.xp6(10),e.Q6J("src",s.imagen_previsualiza,e.LSH))},dependencies:[d.O5,l.Fj,l.JJ,l.On,d.Ov]})}return n})()},{path:"list/delete/:id",component:(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.Xpm({type:n,selectors:[["app-delete-user"]],decls:2,vars:0,template:function(o,s){1&o&&(e.TgZ(0,"p"),e._uU(1,"delete-user works!"),e.qZA())}})}return n})()},{path:"**",redirectTo:"list"}]}];let k=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[u.Bz.forChild(S),u.Bz]})}return n})();var f=r(1274),J=r(53);let j=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[d.ez,k,c.JF,l.u5,f.IJ,l.UX,J.vi,f.bz,f.jF]})}return n})()}}]);