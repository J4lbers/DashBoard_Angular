"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[750],{9750:(D,b,n)=>{n.r(b),n.d(b,{OrdersModule:()=>I});var d=n(6814),u=n(7304),t=n(5879);let Z=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275cmp=t.Xpm({type:e,selectors:[["app-orders"]],decls:1,vars:0,template:function(s,i){1&s&&t._UZ(0,"router-outlet")},dependencies:[u.lC]})}return e})();var c=n(9862),O=n(5619),m=n(4716),g=n(6988),y=n(3595);let f=(()=>{class e{http;authservice;token;isLoading$;isLoadingSubject;constructor(r,s){this.http=r,this.authservice=s,this.isLoadingSubject=new O.X(!1),this.isLoading$=this.isLoadingSubject.asObservable(),this.token=this.authservice.token}ngOnInit(){}listOrders(){this.isLoadingSubject.next(!0);let r=new c.WM({Authorization:this.token});return this.http.get(g.$g+"orders",{headers:r}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}updatedEstado(r){console.log(r),this.isLoadingSubject.next(!0);let s=new c.WM({Authorization:this.token});return this.http.put(g.$g+"orders/"+r,{headers:s}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}updatedEstado2(r){console.log(r," del service"),this.isLoadingSubject.next(!0);let s=new c.WM({Authorization:this.token});return this.http.put(g.$g+"orders/"+r,{headers:s}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}recargarPagina(){window.location.reload()}static \u0275fac=function(s){return new(s||e)(t.LFG(c.eN),t.LFG(y.e8))};static \u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var v=n(2425),l=n(1274),p=n(6223);function _(e,a){1&e&&t._UZ(0,"span",15)}let x=(()=>{class e{orderService;activedRoute;toastr;modal;orders;OrderD=new t.vpe;isLoading$;ORDER_ID;isLoading;constructor(r,s,i,o){this.orderService=r,this.activedRoute=s,this.toastr=i,this.modal=o}ngOnInit(){this.isLoading$=this.orderService.isLoading$,this.ORDER_ID=this.orders.id}cambiarEstado(){console.log(this.ORDER_ID),this.orderService.updatedEstado(this.ORDER_ID).subscribe(r=>{console.log(r),this.toastr.success("Bien","La orden ha sido despachada")})}static \u0275fac=function(s){return new(s||e)(t.Y36(f),t.Y36(u.gz),t.Y36(v._W),t.Y36(l.Kz))};static \u0275cmp=t.Xpm({type:e,selectors:[["app-edit-order"]],inputs:{orders:"orders"},outputs:{OrderD:"OrderD"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return i.modal.dismiss()}),t.TgZ(5,"span",4),t.O4$(),t.TgZ(6,"svg",5),t._UZ(7,"rect",6)(8,"rect",7),t.qZA()()()(),t.kcU(),t.TgZ(9,"div",8)(10,"form",9)(11,"p"),t._uU(12," \xbfESTAS SEGURO DE QUE LA ORDEN YA SE DESPACHO? "),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return i.modal.dismiss()}),t._uU(15,"Cerrar"),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return i.cambiarEstado()}),t.TgZ(17,"span",13),t._uU(18,"CAMBIAR ESTADO"),t.qZA(),t.YNc(19,_,1,0,"span",14),t.ALo(20,"async"),t.qZA()()()()()),2&s&&(t.xp6(3),t.hij("ESTADO NUMERO: ",i.orders.id,""),t.xp6(16),t.Q6J("ngIf",t.lcZ(20,2,i.isLoading)))},dependencies:[d.O5,p._Y,p.JL,p.F,d.Ov]})}return e})();function T(e,a){1&e&&t._UZ(0,"span",22)}function A(e,a){if(1&e&&(t.TgZ(0,"div",32),t._UZ(1,"img",33),t.qZA()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("src",r.user.image,t.LSH)}}function L(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"div",24)(2,"div",32),t._UZ(3,"img",33),t.qZA(),t.TgZ(4,"div",26)(5,"span",28),t._uU(6),t.qZA()()(),t.BQk()),2&e){const r=a.$implicit;t.xp6(3),t.Q6J("src",r.product.image1,t.LSH),t.xp6(3),t.Oqu(r.product.name)}}function w(e,a){if(1&e&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.status)}}function U(e,a){if(1&e&&(t.TgZ(0,"span",35),t._uU(1),t.qZA()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.status," ")}}function S(e,a){if(1&e){const r=t.EpF();t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"tr",23)(3,"td")(4,"div",24),t.YNc(5,A,2,1,"div",25),t.TgZ(6,"div",26)(7,"span",27),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t.ynx(10),t.TgZ(11,"div",24)(12,"div",26)(13,"span",28),t._uU(14),t.qZA()()(),t.BQk(),t.qZA(),t.TgZ(15,"td"),t.YNc(16,L,7,2,"ng-container",21),t.qZA(),t.TgZ(17,"td"),t.YNc(18,w,2,1,"span",29),t.YNc(19,U,2,1,"span",30),t.qZA(),t.TgZ(20,"td",24)(21,"button",31),t.NdJ("click",function(){const o=t.CHM(r).$implicit,h=t.oxw();return t.KtG(h.cambiarEstado(o.id))}),t._uU(22," Cambiar Estado "),t.qZA()()(),t.BQk()}if(2&e){const r=a.$implicit;t.xp6(5),t.Q6J("ngIf",r.user.image),t.xp6(3),t.Oqu(r.user.name),t.xp6(6),t.hij(" ",r.address.address,""),t.xp6(2),t.Q6J("ngForOf",r.orderHasProducts),t.xp6(2),t.Q6J("ngIf","PAGADO"==r.status),t.xp6(1),t.Q6J("ngIf","DESPACHADO"==r.status)}}const E=[{path:"",component:Z,children:[{path:"list",component:(()=>{class e{orderService;modalService;toastr;isLoading$;orders;orden_id;constructor(r,s,i){this.orderService=r,this.modalService=s,this.toastr=i}ngOnInit(){this.isLoading$=this.orderService.isLoading$,this.orderService.listOrders().subscribe(r=>{console.log(r),this.orders=r})}cambiarEstado(r){const s=this.modalService.open(x,{centered:!0,size:"md"});s.componentInstance.orders=r,s.componentInstance.OrderD.subscribe(i=>{let o=this.orders.findIndex(h=>h.id==i.id);-1!=o&&this.orders.splice(o,1),this.orderService.recargarPagina()})}static \u0275fac=function(s){return new(s||e)(t.Y36(f),t.Y36(l.FF),t.Y36(v._W))};static \u0275cmp=t.Xpm({type:e,selectors:[["app-list-orders"]],decls:33,vars:4,consts:[[1,"card"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"card-toolbar"],["data-kt-user-table-toolbar","base",1,"d-flex","justify-content-end"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","w-300px","w-md-325px"],[1,"separator","border-gray-200"],["data-kt-user-table-filter","form",1,"px-7","py-5"],[1,"d-flex","justify-content-end"],["type","reset","data-kt-menu-dismiss","true","data-kt-user-table-filter","reset",1,"btn","btn-light","btn-active-light-primary","fw-semibold","me-2","px-6"],["type","submit","data-kt-menu-dismiss","true","data-kt-user-table-filter","filter",1,"btn","btn-primary","fw-semibold","px-6"],[1,"card-body","py-4"],["id","kt_table_users_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"table-responsive"],["id","kt_table_users",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable","no-footer"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","161.469px"],["tabindex","0","aria-controls","kt_table_users","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"min-w-125px","sorting",2,"width","100.469px"],[1,"text-gray-600","fw-semibold"],[4,"ngFor","ngForOf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"odd"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px me-5",4,"ngIf"],[1,"d-flex","justify-content-start","flex-column"],["href","#",1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],[1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],["class","badge badge-light-primary fs-7 fw-bold",4,"ngIf"],["class","badge badge-light-success fs-7 fw-bold",4,"ngIf"],["type","reset",1,"btn","btn-primary","btn-sm",3,"click"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"],[1,"badge","badge-light-primary","fs-7","fw-bold"],[1,"badge","badge-light-success","fs-7","fw-bold"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.YNc(1,T,1,0,"span",1),t.ALo(2,"async"),t.TgZ(3,"div",2),t._UZ(4,"div",3),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6),t._UZ(8,"div",7),t.TgZ(9,"div",8)(10,"div",9)(11,"button",10),t._uU(12,"Reset"),t.qZA(),t.TgZ(13,"button",11),t._uU(14,"Apply"),t.qZA()()()()()()(),t.TgZ(15,"div",12)(16,"div",13)(17,"div",14)(18,"table",15)(19,"thead")(20,"tr",16)(21,"th",17),t._uU(22," Nombre "),t.qZA(),t.TgZ(23,"th",17),t._uU(24," Direccion "),t.qZA(),t.TgZ(25,"th",18),t._uU(26," Producto "),t.qZA(),t.TgZ(27,"th",19),t._uU(28," Estado "),t.qZA(),t.TgZ(29,"th",19),t._uU(30," Estado "),t.qZA()()(),t.TgZ(31,"tbody",20),t.YNc(32,S,23,6,"ng-container",21),t.qZA()()()()()()),2&s&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.isLoading$)),t.xp6(31),t.Q6J("ngForOf",i.orders))},dependencies:[d.sg,d.O5,d.Ov]})}return e})()},{path:"list/edit/:id",component:x}]}];let C=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[u.Bz.forChild(E),u.Bz]})}return e})();var k=n(53);let I=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[d.ez,C,c.JF,p.u5,l.IJ,p.UX,k.vi,l.bz,l.jF]})}return e})()}}]);